{% if items %}
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for item in items %}

      <article class="group rounded-3xl border border-white/10 bg-white/5 p-5 shadow-lg hover:bg-white/10 transition relative overflow-hidden">

        <a href="{% url 'item_detail' item.id %}" class="block">
          <!-- IMAGE -->
          <div class="rounded-3xl border border-white/10 bg-white/5 p-4">
            {% if item.photo %}
              <img
                src="{{ item.photo.url }}"
                alt="{{ item.title }}"
                class="w-full h-48 object-cover rounded-2xl border border-white/10"
              />
            {% else %}
              {% with img=item.images.first %}
                {% if img %}
                  <img
                    src="{{ img.image.url }}"
                    alt="{{ item.title }}"
                    class="w-full h-48 object-cover rounded-2xl border border-white/10"
                  />
                {% else %}
                  <div class="w-full h-48 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-400 text-sm">
                    Pas d’image
                  </div>
                {% endif %}
              {% endwith %}
            {% endif %}
          </div>

          <div class="mt-4 flex items-start justify-between gap-3">
            <div>
              <h3 class="text-white font-semibold leading-tight">{{ item.title }}</h3>
              <p class="mt-1 text-xs text-slate-400 line-clamp-2">{{ item.description }}</p>
              <p class="mt-3 text-xs text-slate-500">ID #{{ item.id }}</p>
            </div>

            <span class="inline-flex items-center rounded-full bg-emerald-500/15 text-emerald-200 border border-emerald-500/20 px-3 py-1 text-xs font-semibold">
              {{ item.total_cents }} cts
            </span>
          </div>
        </a>

        <div class="mt-4 flex items-center gap-3">
          {% if user.is_authenticated and item.seller_id == user.id %}
            <span class="inline-flex items-center px-4 py-2 rounded-2xl bg-white/10 text-white text-xs border border-white/10">
              Ton annonce
            </span>
          {% else %}
            <a
              href="{% url 'buy_item' item.id %}"
              class="inline-flex items-center justify-center gap-2 px-4 py-2 rounded-2xl bg-gradient-to-r from-indigo-500 to-cyan-400 text-slate-950 font-semibold text-xs hover:opacity-95"
            >
              Acheter →
            </a>
          {% endif %}
        </div>

      </article>

    {% endfor %}
  </div>

{% else %}
  <div class="rounded-3xl border border-white/10 bg-white/5 p-10 text-center text-slate-400">
    Aucune annonce trouvée.
  </div>
{% endif %}
